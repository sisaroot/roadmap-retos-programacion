<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>JJOO Par√≠s 2024 ‚Äî Simulador SisaRoot</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    :root {
      --bg: #04040d; --glass: rgba(255,255,255,.04); --glass-b: rgba(255,255,255,.09);
      --gold:#ffd93d; --silver:#c9d1d9; --bronze:#d4845a;
      --p1:#7c3aed; --p2:#2563eb; --p3:#06b6d4; --accent:#818cf8;
      --text:#f1f1f8; --muted:rgba(241,241,248,.45); --r:18px; --r-sm:10px;
    }
    body { font-family:'Inter',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; overflow-x:hidden; }
    .bg-canvas {
      position:fixed;inset:0;z-index:0;pointer-events:none;
      background:
        radial-gradient(ellipse 80vw 60vh at 10% 20%,rgba(124,58,237,.18) 0%,transparent 70%),
        radial-gradient(ellipse 60vw 50vh at 90% 80%,rgba(6,182,212,.13) 0%,transparent 70%),
        var(--bg);
    }
    .orb { position:fixed;border-radius:50%;filter:blur(70px);opacity:.55;pointer-events:none;animation:float 12s ease-in-out infinite; }
    .o1{width:380px;height:380px;background:radial-gradient(circle,#7c3aed,transparent);top:-80px;left:-80px;}
    .o2{width:300px;height:300px;background:radial-gradient(circle,#2563eb,transparent);bottom:0;right:-60px;animation-delay:-4s;}
    .o3{width:220px;height:220px;background:radial-gradient(circle,#06b6d4,transparent);top:40%;left:55%;animation-delay:-8s;}
    @keyframes float{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(20px,-20px) scale(1.05)}66%{transform:translate(-15px,15px) scale(.95)}}
    header {
      position:sticky;top:0;z-index:10;display:flex;align-items:center;gap:1.25rem;
      padding:1.1rem 2.5rem;border-bottom:1px solid var(--glass-b);
      backdrop-filter:blur(24px);background:rgba(7,7,20,.65);
    }
    .logo {
      width:46px;height:46px;border-radius:13px;flex-shrink:0;
      background:linear-gradient(135deg,var(--p1),var(--p2));
      display:flex;align-items:center;justify-content:center;font-size:1.4rem;
      box-shadow:0 0 20px rgba(124,58,237,.4);
    }
    .ht h1 {
      font-family:'Space Grotesk',sans-serif;font-size:1.2rem;font-weight:700;
      background:linear-gradient(90deg,#fff,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;
    }
    .ht p { font-size:.74rem;color:var(--muted); }
    .hstat { margin-left:auto;display:flex;align-items:center;gap:.5rem;font-size:.74rem;color:var(--muted); }
    .dot { width:7px;height:7px;border-radius:50%;background:#10b981;box-shadow:0 0 8px #10b981;animation:pulse 2s infinite; }
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
    .layout {
      position:relative;z-index:1;display:grid;grid-template-columns:310px 1fr;
      gap:1.75rem;max-width:1280px;margin:0 auto;padding:2rem 2rem 4rem;
    }
    @media(max-width:840px){.layout{grid-template-columns:1fr;}}
    .sidebar{display:flex;flex-direction:column;gap:1.1rem;}
    .glass{background:var(--glass);border:1px solid var(--glass-b);border-radius:var(--r);backdrop-filter:blur(16px);}
    .panel{padding:1.35rem;}
    .plabel {
      display:flex;align-items:center;gap:.45rem;
      font-size:.67rem;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);margin-bottom:1.1rem;
    }
    .plabel .d{width:5px;height:5px;border-radius:50%;background:linear-gradient(135deg,var(--p1),var(--p3));}
    .field{margin-bottom:.8rem;}
    .field label{display:block;font-size:.74rem;color:var(--muted);margin-bottom:.3rem;font-weight:500;}
    .field input,.field select {
      width:100%;padding:.65rem .95rem;border-radius:var(--r-sm);border:1px solid var(--glass-b);
      background:rgba(255,255,255,.04);color:var(--text);font-family:inherit;font-size:.85rem;outline:none;
      transition:border-color .2s,box-shadow .2s;
    }
    .field input::placeholder{color:var(--muted);}
    .field input:focus,.field select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(129,140,248,.15);}
    .field select option{background:#111128;}
    .btn{
      width:100%;padding:.72rem 1rem;border-radius:var(--r-sm);border:none;
      font-family:'Space Grotesk',sans-serif;font-size:.875rem;font-weight:600;
      cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.4rem;
      transition:transform .18s,box-shadow .18s;
    }
    .btn:active{transform:scale(.97)!important;}
    .bp{background:linear-gradient(135deg,var(--p1),var(--p2));color:#fff;box-shadow:0 4px 18px rgba(124,58,237,.3);}
    .bp:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(124,58,237,.45);}
    .bs{background:linear-gradient(135deg,#059669,#10b981);color:#fff;box-shadow:0 4px 18px rgba(16,185,129,.3);font-size:.95rem;padding:.85rem;}
    .bs:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(16,185,129,.45);}
    .br{background:rgba(255,255,255,.05);color:var(--muted);border:1px solid var(--glass-b);margin-top:.6rem;}
    .br:hover{background:rgba(239,68,68,.1);color:#f87171;border-color:rgba(239,68,68,.3);}
    .chips{display:flex;flex-wrap:wrap;gap:.35rem;margin-top:.7rem;}
    .chip{
      padding:.22rem .65rem;border-radius:999px;font-size:.71rem;font-weight:600;
      background:rgba(129,140,248,.12);border:1px solid rgba(129,140,248,.25);color:var(--accent);
      display:flex;align-items:center;gap:.3rem;
    }
    .chip-n{background:rgba(129,140,248,.25);border-radius:999px;padding:0 .38rem;font-size:.63rem;}
    .main{display:flex;flex-direction:column;gap:1.6rem;}
    .stats-row{display:grid;grid-template-columns:repeat(3,1fr);gap:.8rem;}
    .scard{padding:.9rem 1.1rem;border-radius:var(--r);border:1px solid var(--glass-b);background:var(--glass);text-align:center;}
    .sv{font-family:'Space Grotesk',sans-serif;font-size:2rem;font-weight:900;background:linear-gradient(135deg,var(--accent),var(--p3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .sl{font-size:.69rem;color:var(--muted);margin-top:.15rem;text-transform:uppercase;letter-spacing:.08em;}
    .sec-hdr{display:flex;align-items:center;gap:.7rem;margin-bottom:1.15rem;}
    .sec-hdr h2{font-family:'Space Grotesk',sans-serif;font-size:.95rem;font-weight:700;}
    .sec-hdr .line{flex:1;height:1px;background:var(--glass-b);}
    .sbadge{font-size:.69rem;font-weight:700;padding:.18rem .55rem;border-radius:999px;background:rgba(129,140,248,.15);color:var(--accent);border:1px solid rgba(129,140,248,.2);}
    .egrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:.8rem;}
    .etile{
      padding:1rem 1.15rem;border-radius:var(--r);border:1px solid var(--glass-b);background:var(--glass);
      position:relative;overflow:hidden;transition:transform .2s,border-color .2s,box-shadow .2s;
    }
    .etile:hover{transform:translateY(-3px);border-color:rgba(129,140,248,.4);box-shadow:0 8px 20px rgba(0,0,0,.3);}
    .etile-icon{font-size:1.35rem;margin-bottom:.35rem;}
    .etile-name{font-weight:600;font-size:.875rem;margin-bottom:.3rem;}
    .etile-count{font-size:.73rem;}
    .ready{color:#34d399;} .wait{color:var(--muted);}
    .prog{height:3px;border-radius:2px;margin-top:.6rem;background:rgba(255,255,255,.07);overflow:hidden;}
    .prog-fill{height:100%;border-radius:2px;background:linear-gradient(90deg,var(--p1),var(--p3));transition:width .5s cubic-bezier(.34,1.56,.64,1);}
    .empty{text-align:center;padding:3rem 1rem;color:var(--muted);grid-column:1/-1;}
    .empty-i{font-size:3rem;margin-bottom:.6rem;}
    .rgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:.9rem;}
    .rcard{
      padding:1.25rem;border-radius:var(--r);border:1px solid var(--glass-b);background:var(--glass);
      position:relative;overflow:hidden;
    }
    .rcard::after{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--p1),var(--p3),#10b981);}
    .rev{font-family:'Space Grotesk',sans-serif;font-size:.9rem;font-weight:700;margin-bottom:.85rem;}
    .mrow{display:flex;align-items:center;gap:.8rem;padding:.38rem 0;border-bottom:1px solid rgba(255,255,255,.05);}
    .mrow:last-child{border-bottom:none;}
    .memi{font-size:1.3rem;flex-shrink:0;width:26px;text-align:center;}
    .mbody{flex:1;}
    .math{font-weight:600;font-size:.85rem;}
    .mnat{font-size:.71rem;color:var(--muted);}
    .mtag{font-size:.63rem;font-weight:700;padding:.13rem .48rem;border-radius:5px;text-transform:uppercase;letter-spacing:.05em;}
    .tg{background:rgba(255,217,61,.15);color:var(--gold);border:1px solid rgba(255,217,61,.25);}
    .ts{background:rgba(201,209,217,.1);color:var(--silver);border:1px solid rgba(201,209,217,.2);}
    .tb{background:rgba(212,132,90,.15);color:var(--bronze);border:1px solid rgba(212,132,90,.25);}
    .rwrap{overflow:hidden;}
    table.rk{width:100%;border-collapse:collapse;}
    table.rk th{padding:.65rem 1rem;text-align:left;font-size:.67rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);font-weight:600;border-bottom:1px solid var(--glass-b);}
    table.rk td{padding:.65rem 1rem;font-size:.875rem;}
    table.rk tbody tr{border-bottom:1px solid rgba(255,255,255,.04);transition:background .15s;}
    table.rk tbody tr:hover{background:rgba(255,255,255,.03);}
    table.rk tbody tr:last-child{border-bottom:none;}
    .pp{display:inline-flex;align-items:center;justify-content:center;width:27px;height:27px;border-radius:7px;font-size:.77rem;font-weight:800;}
    .pp1{background:linear-gradient(135deg,#ffd93d,#f59e0b);color:#000;box-shadow:0 0 12px rgba(255,217,61,.4);}
    .pp2{background:linear-gradient(135deg,#c9d1d9,#94a3b8);color:#000;}
    .pp3{background:linear-gradient(135deg,#d4845a,#92400e);color:#fff;}
    .ppn{background:rgba(255,255,255,.07);color:var(--muted);}
    .ng{color:var(--gold);font-weight:700;} .ns{color:var(--silver);font-weight:700;} .nb{color:var(--bronze);font-weight:700;}
    .bars{display:flex;gap:2px;align-items:flex-end;height:16px;}
    .bar{width:5px;border-radius:2px 2px 0 0;} .bg_{background:var(--gold);} .bs_{background:var(--silver);} .bb_{background:var(--bronze);}
    #toast{
      position:fixed;bottom:2rem;right:2rem;z-index:9999;padding:.75rem 1.25rem;border-radius:11px;
      font-size:.84rem;font-weight:600;display:flex;align-items:center;gap:.55rem;
      transform:translateY(80px) scale(.9);opacity:0;transition:all .35s cubic-bezier(.34,1.56,.64,1);pointer-events:none;backdrop-filter:blur(12px);
    }
    #toast.show{transform:translateY(0) scale(1);opacity:1;}
    #toast.ok {background:rgba(16,185,129,.2);border:1px solid rgba(16,185,129,.4);color:#34d399;}
    #toast.err{background:rgba(239,68,68,.2); border:1px solid rgba(239,68,68,.4); color:#f87171;}
    #toast.inf{background:rgba(129,140,248,.2);border:1px solid rgba(129,140,248,.4);color:var(--accent);}
    @keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
    .fi{animation:fadeUp .35s ease both;}
    @keyframes fall{0%{transform:translateY(-10px) rotate(0);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
    .conf{position:fixed;width:8px;height:8px;border-radius:2px;pointer-events:none;z-index:9999;}
  </style>
</head>
<body>
<div class="bg-canvas"></div>
<div class="orb o1"></div><div class="orb o2"></div><div class="orb o3"></div>

<header>
  <div class="logo">üèÖ</div>
  <div class="ht">
    <h1>Olympic Games Simulator</h1>
    <p>Par√≠s 2024 ¬∑ Reto #31 ¬∑ SisaRoot</p>
  </div>
  <div class="hstat"><span class="dot"></span><span id="hst">En espera‚Ä¶</span></div>
</header>

<div class="layout">
  <div class="sidebar">
    <div class="glass panel">
      <div class="plabel"><span class="d"></span>Registrar Evento</div>
      <div class="field"><label>Nombre del evento</label><input id="evtIn" type="text" placeholder="ej. 100m Atletismo‚Ä¶"/></div>
      <button class="btn bp" onclick="regEvt()">Ôºã Agregar evento</button>
      <div id="evtChips" class="chips"></div>
    </div>
    <div class="glass panel">
      <div class="plabel"><span class="d"></span>Registrar Participante</div>
      <div class="field"><label>Evento</label><select id="evtSel"><option value="">‚Äî Selecciona evento ‚Äî</option></select></div>
      <div class="field"><label>Nombre del atleta</label><input id="pName" type="text" placeholder="ej. Marcell Jacobs"/></div>
      <div class="field"><label>Pa√≠s</label><input id="pCountry" type="text" placeholder="ej. Italia"/></div>
      <button class="btn bp" onclick="regPart()">Ôºã Agregar participante</button>
    </div>
    <div class="glass panel">
      <div class="plabel"><span class="d"></span>Acciones</div>
      <button class="btn bs" onclick="simulate()">üé≤ Simular Juegos Ol√≠mpicos</button>
      <button class="btn br" onclick="reset()">‚úï Reiniciar todo</button>
    </div>
  </div>

  <div class="main">
    <div class="stats-row">
      <div class="scard glass"><div class="sv" id="stEvt">0</div><div class="sl">Eventos</div></div>
      <div class="scard glass"><div class="sv" id="stAth">0</div><div class="sl">Atletas</div></div>
      <div class="scard glass"><div class="sv" id="stCnt">0</div><div class="sl">Pa√≠ses</div></div>
    </div>

    <section>
      <div class="sec-hdr"><h2>Eventos</h2><div class="line"></div><span class="sbadge" id="evtB">0</span></div>
      <div id="evtGrid" class="egrid">
        <div class="empty"><div class="empty-i">üèüÔ∏è</div><p>Sin eventos todav√≠a.<br/>¬°Registra el primero!</p></div>
      </div>
    </section>

    <section id="resSec" style="display:none">
      <div class="sec-hdr"><h2>Resultados</h2><div class="line"></div><span class="sbadge" id="resB">0</span></div>
      <div id="resGrid" class="rgrid"></div>
    </section>

    <section id="rankSec" style="display:none">
      <div class="sec-hdr"><h2>Ranking de Medallas</h2><div class="line"></div></div>
      <div class="glass rwrap">
        <table class="rk">
          <thead><tr><th>Pos.</th><th>Pa√≠s</th><th>ü•á</th><th>ü•à</th><th>ü•â</th><th>Total</th><th></th></tr></thead>
          <tbody id="rankB"></tbody>
        </table>
      </div>
    </section>
  </div>
</div>
<div id="toast"></div>

<script>
const S = { events:{}, medals:{}, results:[] };
const $  = id => document.getElementById(id);
const v  = id => $(id).value.trim();
const shuffle = a => { const b=[...a]; for(let i=b.length-1;i>0;i--){const j=(Math.random()*(i+1))|0;[b[i],b[j]]=[b[j],b[i]];} return b; };

function toast(msg,type='ok'){
  const el=$('toast'); el.className=type+' show';
  el.innerHTML=(type==='ok'?'‚úì':type==='err'?'‚úï':'‚Ñπ')+' '+msg;
  clearTimeout(el._t); el._t=setTimeout(()=>el.classList.remove('show'),3000);
}

function confetti(){
  const colors=['#ffd93d','#7c3aed','#06b6d4','#10b981','#f472b6'];
  for(let i=0;i<50;i++){
    const d=document.createElement('div'); d.className='conf';
    d.style.cssText=`left:${Math.random()*100}vw;top:-10px;background:${colors[(Math.random()*colors.length)|0]};animation:fall ${1.2+Math.random()*1.8}s ${Math.random()*.8}s ease-in forwards;`;
    document.body.appendChild(d); setTimeout(()=>d.remove(),3e3);
  }
}

function regEvt(){
  const name=v('evtIn'); if(!name){toast('Ingresa un nombre.','err');return;}
  if(Object.keys(S.events).some(k=>k.toLowerCase()===name.toLowerCase())){toast(`"${name}" ya existe.`,'err');return;}
  S.events[name]=[]; $('evtIn').value=''; toast(`Evento "${name}" creado.`); renderAll();
}

function regPart(){
  const ev=v('evtSel'),n=v('pName'),c=v('pCountry');
  if(!ev){toast('Selecciona un evento.','err');return;} if(!n||!c){toast('Completa nombre y pa√≠s.','err');return;}
  S.events[ev].push({name:n,country:c}); $('pName').value=''; $('pCountry').value='';
  toast(`${n} a√±adido a "${ev}".`); renderAll();
}

function simulate(){
  if(!Object.keys(S.events).length){toast('No hay eventos.','err');return;}
  S.results=[];S.medals={};let ok=0;
  for(const[ev,p] of Object.entries(S.events)){
    if(p.length<3)continue;
    const s=shuffle(p); const[g,sl,b]=[s[0],s[1],s[2]];
    S.results.push({event:ev,gold:g,silver:sl,bronze:b});
    addM(g.country,'gold');addM(sl.country,'silver');addM(b.country,'bronze'); ok++;
  }
  if(!ok){toast('Cada evento necesita ‚â•3 participantes.','err');return;}
  confetti(); toast('¬°Simulaci√≥n completada! üéâ'); $('hst').textContent='Simulaci√≥n lista ‚úì'; renderAll();
}

function addM(c,t){ if(!S.medals[c])S.medals[c]={gold:0,silver:0,bronze:0}; S.medals[c][t]++; }

function reset(){
  if(!confirm('¬øReiniciar todo?'))return;
  Object.assign(S,{events:{},medals:{},results:[]}); $('hst').textContent='En espera‚Ä¶'; toast('Reiniciado.','inf'); renderAll();
}

function renderAll(){
  // chips
  $('evtChips').innerHTML=Object.entries(S.events).map(([n,p])=>`<span class="chip">${n}<span class="chip-n">${p.length}</span></span>`).join('');
  // select
  const cur=v('evtSel');
  $('evtSel').innerHTML='<option value="">‚Äî Selecciona evento ‚Äî</option>'+Object.keys(S.events).map(n=>`<option ${n===cur?'selected':''} value="${n}">${n}</option>`).join('');
  // events grid
  const names=Object.keys(S.events);
  $('evtB').textContent=names.length;
  const icons=['üèÉ','üèä','üö¥','ü§∏','ü§∫','ü§º','‚õ∑Ô∏è','üèãÔ∏è','ü§æ','üèá','‚õµ','üéØ','üèÑ','üéΩ'];
  $('evtGrid').innerHTML=!names.length
    ?'<div class="empty"><div class="empty-i">üèüÔ∏è</div><p>Sin eventos todav√≠a.</p></div>'
    :names.map((n,i)=>{const c=S.events[n].length,ok=c>=3,pct=Math.min(100,Math.round(c/3*100));return`<div class="etile fi" style="animation-delay:${i*.05}s"><div class="etile-icon">${icons[i%icons.length]}</div><div class="etile-name">${n}</div><div class="etile-count ${ok?'ready':'wait'}">${c} atleta${c!==1?'s':''} ¬∑ ${ok?'‚úì Listo':'m√≠n. 3'}</div><div class="prog"><div class="prog-fill" style="width:${pct}%"></div></div></div>`;}).join('');
  // results
  const rs=$('resSec'); if(!S.results.length){rs.style.display='none';}
  else{rs.style.display='block';$('resB').textContent=S.results.length;$('resGrid').innerHTML=S.results.map((r,i)=>`<div class="rcard glass fi" style="animation-delay:${i*.07}s"><div class="rev">üèÜ ${r.event}</div><div class="mrow"><span class="memi">ü•á</span><div class="mbody"><div class="math">${r.gold.name}</div><div class="mnat">${r.gold.country}</div></div><span class="mtag tg">Oro</span></div><div class="mrow"><span class="memi">ü•à</span><div class="mbody"><div class="math">${r.silver.name}</div><div class="mnat">${r.silver.country}</div></div><span class="mtag ts">Plata</span></div><div class="mrow"><span class="memi">ü•â</span><div class="mbody"><div class="math">${r.bronze.name}</div><div class="mnat">${r.bronze.country}</div></div><span class="mtag tb">Bronce</span></div></div>`).join('');}
  // ranking
  const rksec=$('rankSec'),keys=Object.keys(S.medals);
  if(!keys.length){rksec.style.display='none';}
  else{
    rksec.style.display='block';
    const rk=keys.map(c=>({c,...S.medals[c],t:S.medals[c].gold+S.medals[c].silver+S.medals[c].bronze})).sort((a,b)=>b.gold-a.gold||b.silver-a.silver||b.bronze-a.bronze);
    $('rankB').innerHTML=rk.map(({c,gold,silver,bronze,t},i)=>{
      const pos=i+1,cls=pos===1?'pp1':pos===2?'pp2':pos===3?'pp3':'ppn';
      const gh=Math.max(2,Math.round(gold/t*14)),sh=Math.max(2,Math.round(silver/t*14)),bh=Math.max(2,Math.round(bronze/t*14));
      return`<tr class="fi" style="animation-delay:${i*.04}s"><td><span class="pp ${cls}">${pos}</span></td><td><strong>${c}</strong></td><td><span class="ng">${gold}</span></td><td><span class="ns">${silver}</span></td><td><span class="nb">${bronze}</span></td><td><strong>${t}</strong></td><td><div class="bars"><div class="bar bg_" style="height:${gh}px"></div><div class="bar bs_" style="height:${sh}px"></div><div class="bar bb_" style="height:${bh}px"></div></div></td></tr>`;
    }).join('');
  }
  // stats
  const evts=Object.keys(S.events),athletes=evts.reduce((s,k)=>s+S.events[k].length,0),countries=new Set(evts.flatMap(k=>S.events[k].map(p=>p.country))).size;
  $('stEvt').textContent=evts.length; $('stAth').textContent=athletes; $('stCnt').textContent=countries;
}

$('evtIn').addEventListener('keydown',e=>e.key==='Enter'&&regEvt());
$('pCountry').addEventListener('keydown',e=>e.key==='Enter'&&regPart());
</script>
</body>
</html>
